<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Заполнение заказа</title>-->
<!--    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <style>-->
<!--        body {-->
<!--            background-color: #e9f7ef;-->
<!--        }-->
<!--        .form-label {-->
<!--            color: #28a745;-->
<!--        }-->
<!--        .btn-custom {-->
<!--            background-color: #28a745;-->
<!--            color: white;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container mt-5">-->
<!--        <h1 class="text-center">Заполнение заказа</h1>-->
<!--        <form id="orderForm">-->
<!--            <input type="hidden" id="type" name="type" value="2">-->
<!--            <input type="hidden" id="tariff_code" name="tariff_code" value="138">-->

<!--            <div class="form-group">-->
<!--                <label for="from_city" class="form-label">Город отправления:</label>-->
<!--                <input type="text" class="form-control" id="from_city" name="from_city" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="from_address" class="form-label">Адрес отправления:</label>-->
<!--                <input type="text" class="form-control" id="from_address" name="from_address" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="to_city" class="form-label">Город назначения:</label>-->
<!--                <input type="text" class="form-control" id="to_city" name="to_city" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="to_address" class="form-label">Адрес назначения:</label>-->
<!--                <input type="text" class="form-control" id="to_address" name="to_address" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="recipient_name" class="form-label">Имя получателя:</label>-->
<!--                <input type="text" class="form-control" id="recipient_name" name="recipient_name" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="recipient_phone" class="form-label">Телефон получателя:</label>-->
<!--                <input type="text" class="form-control" id="recipient_phone" name="recipient_phone" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="sender_name" class="form-label">Имя отправителя:</label>-->
<!--                <input type="text" class="form-control" id="sender_name" name="sender_name" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="sender_company" class="form-label">Компания отправителя:</label>-->
<!--                <input type="text" class="form-control" id="sender_company" name="sender_company" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="sender_phone" class="form-label">Телефон отправителя:</label>-->
<!--                <input type="text" class="form-control" id="sender_phone" name="sender_phone" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="package_number" class="form-label">Номер упаковки:</label>-->
<!--                <input type="text" class="form-control" id="package_number" name="package_number" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="package_weight" class="form-label">Вес упаковки (г):</label>-->
<!--                <input type="number" class="form-control" id="package_weight" name="package_weight" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="package_length" class="form-label">Длина упаковки (см):</label>-->
<!--                <input type="number" class="form-control" id="package_length" name="package_length" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="package_width" class="form-label">Ширина упаковки (см):</label>-->
<!--                <input type="number" class="form-control" id="package_width" name="package_width" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="package_height" class="form-label">Высота упаковки (см):</label>-->
<!--                <input type="number" class="form-control" id="package_height" name="package_height" required>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="package_comment" class="form-label">Комментарий к упаковке:</label>-->
<!--                <input type="text" class="form-control" id="package_comment" name="package_comment">-->
<!--            </div>-->
<!--            <h2 class="text-center">Предметы</h2>-->
<!--            <div id="items">-->
<!--                <div class="item form-group">-->
<!--                    <label for="item_name" class="form-label">Название предмета:</label>-->
<!--                    <input type="text" class="form-control" id="item_name" name="item_name[]" required>-->
<!--                    <label for="ware_key" class="form-label">Ключ товара:</label>-->
<!--                    <input type="text" class="form-control" id="ware_key" name="ware_key[]" required>-->
<!--                    <label for="payment_value" class="form-label">Стоимость оплаты:</label>-->
<!--                    <input type="number" class="form-control" id="payment_value" name="payment_value[]" required>-->
<!--                    <label for="vat_sum" class="form-label">Сумма НДС:</label>-->
<!--                    <input type="number" class="form-control" id="vat_sum" name="vat_sum[]" required>-->
<!--                    <label for="vat_rate" class="form-label">Ставка НДС (%):</label>-->
<!--                    <input type="number" class="form-control" id="vat_rate" name="vat_rate[]" required>-->
<!--                    <label for="cost" class="form-label">Стоимость:</label>-->
<!--                    <input type="number" class="form-control" id="cost" name="cost[]" required>-->
<!--                    <label for="item_weight" class="form-label">Вес предмета (г):</label>-->
<!--                    <input type="number" class="form-control" id="item_weight" name="item_weight[]" required>-->
<!--                    <label for="amount" class="form-label">Количество:</label>-->
<!--                    <input type="number" class="form-control" id="amount" name="amount[]" required>-->
<!--                </div>-->
<!--            </div>-->
<!--            <button type="button" class="btn btn-custom" id="addItem">Добавить еще один предмет</button><br><br>-->
<!--            <button type="submit" class="btn btn-custom">Отправить заказ</button>-->
<!--        </form>-->
<!--    </div>-->

<!--    <script src="https://telegram.org/js/telegram-web-app.js"></script>-->
<!--    <script>-->
<!--        Telegram.WebApp.ready();-->

<!--        document.getElementById('orderForm').addEventListener('submit', function(event) {-->
<!--            event.preventDefault();-->

<!--            const formData = new FormData(event.target);-->
<!--            const formObject = Object.fromEntries(formData.entries());-->

<!--            const items = [];-->
<!--            document.querySelectorAll('#items .item').forEach(item => {-->
<!--                const itemData = {-->
<!--                    name: item.querySelector('[name="item_name[]"]').value,-->
<!--                    ware_key: item.querySelector('[name="ware_key[]"]').value,-->
<!--                    payment: {-->
<!--                        value: item.querySelector('[name="payment_value[]"]').value,-->
<!--                        vat_sum: item.querySelector('[name="vat_sum[]"]').value,-->
<!--                        vat_rate: item.querySelector('[name="vat_rate[]"]').value-->
<!--                    },-->
<!--                    cost: item.querySelector('[name="cost[]"]').value,-->
<!--                    weight: item.querySelector('[name="item_weight[]"]').value,-->
<!--                    amount: item.querySelector('[name="amount[]"]').value-->
<!--                };-->
<!--                items.push(itemData);-->
<!--            });-->

<!--            formObject.items = items;-->
<!--            formObject.type = 2; // Установка дефолтного значения type-->
<!--            formObject.tariff_code = 138; // Установка дефолтного значения tariff_code-->

<!--            // Validate input before sending-->
<!--            if (validateInput(formObject)) {-->
<!--                Telegram.WebApp.sendData(JSON.stringify(formObject));-->
<!--            } else {-->
<!--                alert("Пожалуйста, заполните все обязательные поля корректно.");-->
<!--            }-->
<!--        });-->

<!--        document.getElementById('addItem').addEventListener('click', function() {-->
<!--            const newItem = document.querySelector('#items .item').cloneNode(true);-->
<!--            newItem.querySelectorAll('input').forEach(input => input.value = '');-->
<!--            document.getElementById('items').appendChild(newItem);-->
<!--        });-->

<!--        function validateInput(data) {-->
<!--            // Add your validation logic here-->
<!--            if (!data.from_city || !data.from_address || !data.to_city || !data.to_address || !data.recipient_name || !data.recipient_phone || !data.sender_name || !data.sender_company || !data.sender_phone || !data.package_number || !data.package_weight || !data.package_length || !data.package_width || !data.package_height) {-->
<!--                return false;-->
<!--            }-->

<!--            // Validate items-->
<!--            for (const item of data.items) {-->
<!--                if (!item.name || !item.ware_key || !item.payment.value || !item.payment.vat_sum || !item.payment.vat_rate || !item.cost || !item.weight || !item.amount) {-->
<!--                    return false;-->
<!--                }-->
<!--            }-->

<!--            return true;-->
<!--        }-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDEK Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            width: 300px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        form {
            display: flex;
            flex-direction: column;
        }
        input, button {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #0088cc;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #006699;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CDEK Mini App</h1>
        <form id="cdekForm">
            <input type="text" id="name" placeholder="Ваше имя" required>
            <input type="text" id="address" placeholder="Адрес доставки" required>
            <input type="text" id="trackingNumber" placeholder="Номер отслеживания" required>
            <button type="submit">Отправить</button>
        </form>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        document.getElementById('cdekForm').addEventListener('submit', function(e) {
            e.preventDefault();
            let name = document.getElementById('name').value;
            let address = document.getElementById('address').value;
            let trackingNumber = document.getElementById('trackingNumber').value;

            let data = {
                name: name,
                address: address,
                trackingNumber: trackingNumber
            };

            tg.sendData(JSON.stringify(data));
            tg.close();
        });
    </script>
</body>
</html>